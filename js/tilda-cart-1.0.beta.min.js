function tcart__init(recid,ymapApiKey){window.tcart__ymapApiKey=ymapApiKey;var cartBlock=document.querySelector(".t706"),cartBlocksLength=document.querySelectorAll(".t706").length,rec=document.querySelector("#rec"+recid),dontStore,isOneProduct;if("yes"===window.tcart_initted&&cartBlocksLength>1){var errorText="RU"===window.browserLang?"Ошибка: На странице присутствуют "+cartBlocksLength+" виджета корзины (блок ST100). Пожалуйста, удалите дубликаты. Блоки могут находиться на странице Header или Footer.":"Error: "+cartBlocksLength+" cart widgets (block ST100) on the page. Remove a duplicate. Blocks can be on the Header or Footer page.";return document.querySelector(".t706__previewmode-infobox .t706__previewmode-infobox-error")||Array.prototype.forEach.call(document.querySelectorAll(".t706__previewmode-infobox center"),(function(infobox){infobox.insertAdjacentHTML("beforeend",'<div class="t706__previewmode-infobox-error" style="color:red">'+errorText+"</div>")})),void(void 0===window.tcart_erroralert&&(alert(errorText),window.tcart_erroralert="yes",console.error("Error: Two cart widgets (block ST100) on the page. Remove a duplicate.")))}"y"==cartBlock.getAttribute("data-cart-dontstore")&&(window.tcart_dontstore="y"),"y"==cartBlock.getAttribute("data-cart-oneproduct")&&(window.tcart_oneproduct="y");var maxStoreDays=cartBlock.getAttribute("data-cart-maxstoredays"),sendEvent;maxStoreDays&&(window.tcart_maxstoredays=maxStoreDays),"y"==cartBlock.getAttribute("data-cart-sendevent-onadd")&&(window.tcart_sendevent_onadd="y"),window.tcart_initted="yes",tcart__drawBottomTotalAmount(),tcart__loadLocalObj(),tcart__reDrawCartIcon(),tcart__addEvent__links(),tcart__addEvents(),window.addEventListener("pageshow",(function(event){event.persisted&&(tcart__loadLocalObj(),tcart__reDrawCartIcon())}),!1),setTimeout((function(){tcart__addEvent__selectpayment();var hash=decodeURIComponent(document.location.hash);if(-1!==hash.indexOf("#order:")){var customCartBtn=document.querySelector('a[href="'+hash+'"]');customCartBtn&&customCartBtn.click()}})),rec&&(rec.setAttribute("data-animationappear","off"),rec.style.opacity="1");var prodAmountLabel=cartBlock.querySelector(".t706__cartwin-prodamount-label"),totalAmountLabel=cartBlock.querySelector(".t706__cartwin-totalamount-label");cartBlock.querySelector(".t-input-group_dl")?(prodAmountLabel&&(prodAmountLabel.innerHTML=tcart_dict("subtotal")+": "),totalAmountLabel&&(totalAmountLabel.innerHTML=tcart_dict("grandTotal")+": ")):(prodAmountLabel&&(prodAmountLabel.innerHTML=tcart_dict("total")+": "),totalAmountLabel&&(totalAmountLabel.innerHTML=tcart_dict("total")+": "));var cartHeading=cartBlock.querySelector(".t706__cartwin-heading");""==cartHeading.innerHTML&&(cartHeading.innerHTML=tcart_dict("yourOrder")+":");var cartSubmitBtn=cartBlock.querySelector(".t-form__submit .t-submit");"Submit"==cartSubmitBtn.innerHTML&&(cartSubmitBtn.innerHTML=tcart_dict("submitOrder"));var cartPaymentMethodInput=cartBlock.querySelector(".t-input-group_pm");cartPaymentMethodInput&&(cartPaymentMethodInput.querySelector(".t-input-title").innerHTML=tcart_dict("paymentMethod"));var cartSubmit=cartBlock.querySelector(".t-form__submit"),cartMinimal=cartBlock.querySelector(".t706__minimal");cartSubmit&&cartMinimal&&(cartSubmit.addEventListener("mouseenter",(function(){cartMinimal.classList.add("active")})),cartSubmit.addEventListener("mouseleave",(function(){cartMinimal.classList.remove("active")})))}function tcart_dict(msg){var dict=[];dict.total={EN:"Total",RU:"Сумма",FR:"Total",DE:"Gesamtsumme",ES:"Total",PT:"Total",JA:"合計",ZH:"总额。",UK:"Сума",PL:"Suma",KK:"Жалпы",IT:"Totale",LV:"Kopā"},dict.subtotal={EN:"Subtotal",RU:"Сумма",FR:"Sous-total",DE:"Zwischensumme",ES:"Subtotal",PT:"Subtotal",JA:"小計",ZH:"小计。",UK:"Сума",PL:"Suma",KK:"Қорытынды",IT:"Totale parziale",LV:"Kopējā summa"},dict.grandTotal={EN:"Total",RU:"Итоговая сумма",FR:"Total",DE:"Gesamtsumme",ES:"Total",PT:"Total",JA:"合計",ZH:"总额。",UK:"Загальна сума",PL:"Suma łącznie",KK:"Жалпы",IT:"Totale",LV:"Kopējā summa"},dict.yourOrder={EN:"Your order",RU:"Ваш заказ",FR:"Votre commande",DE:"Ihre Bestellung",ES:"Su pedido",PT:"Seu pedido",JA:"注文済",ZH:"你的订货。",UK:"Ваше замовлення",PL:"Twoje zamówienie",KK:"Сіздің тапсырысыңыз",IT:"Il tuo ordine",LV:"Jūsu pasūtījums"},dict.submitOrder={EN:"Submit order",RU:"Оформить заказ",FR:"Commander",DE:"Bestellung abschicken",ES:"Enviar pedido",PT:"Enviar pedido",JA:"注文を確定",ZH:"办妥订货。",UK:"Оформити замовлення",PL:"Zamów",KK:"Өтінімді",IT:"Inviare ordine",LV:"Iesniegt pasūtījumu"},dict.paymentMethod={EN:"Payment method",RU:"Способ оплаты",FR:"Mode de paiement",DE:"Zahlungsmethode",ES:"Método de pago",PT:"Método de pagamento",JA:"支払方法",ZH:"付款方式。",UK:"Спосіб оплати",PL:"Sposób płatności",KK:"Төлем тәсілі",IT:"Metodo di pagamento",LV:"Apmaksas veids"},dict.clickToOrder={EN:"Click to order",RU:"Оформить заказать",FR:"Commander",DE:"Bestellung abschicken",ES:"Enviar pedido",PT:"Enviar pedido",JA:"注文を確定",ZH:"提交订单。",UK:"Оформити замовлення",PL:"Zamów",KK:"Бұйрығына басыңыз",IT:"Clicca per ordine",LV:"Uzklikšķiniet pasūtījuma"},dict.subtotalDiscount={EN:"Subtotal with discount",RU:"Сумма со скидкой",FR:"Sous-total avec remise",DE:"Zwischensumme mit Rabatt",ES:"Subtotal con descuento",PT:"Subtotal com desconto",JA:"割引後小計",ZH:"减价同小计。",UK:"Сума зі знижкою",PL:"Suma z rabatem",KK:"Жеңілдікпен Қорытынды",IT:"Totale parziale con lo sconto",LV:"Atlaides summa"},dict.promoCode={EN:"Promo code",RU:"Промокод",FR:"Code promo",DE:"Aktionscode",ES:"Código promocional",PT:"Código promocional",JA:"プロモコード",ZH:"促销代码。",UK:"Промокод",PL:"Kod rabatowy",KK:"Промокод",IT:"Codice promozionale",LV:"Promo kods"},dict.discount={EN:"Discount",RU:"Скидка",FR:"Remise",DE:"Rabatt",ES:"Descuento",PT:"Desconto",JA:"割引",ZH:"减价。",UK:"Знижка",PL:"Rabat",KK:"Жеңілдік",IT:"Sconto",LV:"Atlaide"},dict.minimumOrder={EN:"Minimum order",RU:"Минимальный заказ",FR:"Commande minimale",DE:"Minimale Bestellung",ES:"Pedido mínimo",PT:"Pedido mínimo",JA:"最小注文価格",ZH:"最小的订货。",UK:"Мінімальне замовлення",PL:"Minimalne zamówienie",KK:"Ең аз тапсырыс",IT:"Ordine minimo",LV:"Minimālais pasūtījuma"},dict.minimumQuantity={EN:"Minimum order quantity",RU:"Минимальное количество в заказе",FR:"Quantité de commande minimale",DE:"Mindestbestellmenge",ES:"Cantidad mínima del pedido",PT:"Quantidade mínima por pedido",JA:"最小注文数",ZH:"最小的总数。",UK:"Мінімальна кількість у замовленні",PL:"Minimalna ilość w zamówieniu",KK:"Ең аз тапсырыс саны",IT:"Quantità di ordine minimo",LV:"Minimālais pasūtījuma daudzums"},dict.limitReached={EN:"Sorry, limit has been reached. This is the maximum quantity of goods in stock",RU:"Извините, достигнут лимит. Это максимально возможное количество товаров в наличии",FR:"Désolé, la limite a été atteinte. Il s'agit de la quantité maximale de marchandises en stock",DE:"Entschuldigung, das Limit wurde erreicht. Dies ist die maximale Menge an Waren auf Lager",ES:"Lo sentimos, se ha alcanzado el límite. Esta es la cantidad máxima de productos en stock",PT:"Desculpe, o limite foi atingido. Esta é a quantidade máxima de bens em stock",JA:"申し訳ありませんが、上限に達しました。これは、商品の在庫の最大数量です",ZH:"对不起，已经达到极限。这是库存货物的最大数量",UK:"Вибачте, досягнутий ліміт. Це максимально можлива кількість товарів в наявності",PL:"Przepraszamy, osiągnięto limit. Jest to maksymalna ilość dostępnego towaru",KK:"Кешіріңіз, шегі қол жеткізілді. Бұл қоймада тауарлардың барынша саны",IT:"Siamo spiacenti, il limite è stato raggiunto. Questa è la quantità massima di merce in magazzino",LV:"Diemžēl ierobežojums ir sasniegts. Tas ir maksimālais iespējamais preču skaits noliktavā"},dict.free={EN:"free",RU:"бесплатно",FR:"gratuit",DE:"kostenlos",ES:"gratis",PT:"livre",UK:"безкоштовно",JA:"無料で",ZH:"免费",PL:"za darmo",KK:"тегін",IT:"gratuito",LV:"bezmaksas"},dict.youRemoved={EN:"You removed",RU:"Вы удалили",FR:"Vous avez retiré",DE:"Sie haben entfernt",ES:"Has eliminado",PT:"Retirou",JA:"除去しました",ZH:"你删除了",UK:"Щойно видалено",PL:"Usunąłeś",KK:"Сіз жойылған",IT:"Hai rimosso",LV:"Jūs izdzēsāt"},dict.undo={EN:"Undo",RU:"Вернуть",FR:"Annuler",DE:"Rückgängig",ES:"Deshacer",PT:"Desfazer",JA:"元に戻す",ZH:"撤销",UK:"Повернути",PL:"Powrót",KK:"Болдырмау",IT:"Disfare",LV:"Atcelt"},dict.mm={EN:"mm",RU:"мм",FR:"mm",DE:"mm",ES:"mm",PT:"mm",UK:"мм",JA:"mm",ZH:"mm",PL:"mm",KK:"мм",IT:"mm",LV:"mm"},dict.g={EN:"g",RU:"г",FR:"g",DE:"g",ES:"g",PT:"g",UK:"г",JA:"g",ZH:"g",PL:"r",KK:"г",IT:"g",LV:"g"},dict.PCE={EN:"pc",RU:"шт"},dict.NMP={EN:"pack",RU:"уп"},dict.MGM={EN:"mg",RU:"мг"},dict.GRM={EN:"g",RU:"г"},dict.KGM={EN:"kg",RU:"кг"},dict.TNE={EN:"t",RU:"т"},dict.MLT={EN:"ml",RU:"мл"},dict.LTR={EN:"l",RU:"л"},dict.MMT={EN:"mm",RU:"мм"},dict.CMT={EN:"cm",RU:"см"},dict.DMT={EN:"dm",RU:"дм"},dict.MTR={EN:"m",RU:"м"},dict.MTK={EN:"m²",RU:"м²"},dict.MTQ={EN:"m³",RU:"м³"},dict.LMT={EN:"lm",RU:"пог. м"},dict.HAR={EN:"ha",RU:"га"},dict.ACR={EN:"acre"},dict.YRD={EN:"yd"},dict.LBR={EN:"lb"},dict.ONZ={EN:"oz"},dict.INH={EN:"in"},dict.FOT={EN:"ft"};var lang=window.browserLang;return dict[msg]?dict[msg][lang]?dict[msg][lang]:dict[msg].EN:"Text not found #"+msg}function tcart__nullObj(){var tcart={products:[],prodamount:0,amount:0,system:""};return tcart}function tcart__loadLocalObj(){var dataJsonStr=null,timestamp,delta;if("object"==typeof localStorage)try{dataJsonStr=localStorage.getItem("tcart")}catch(e){console.error("Your web browser does not support storing a Cart data locally.")}if(window.tcart=null===dataJsonStr?tcart__nullObj():JSON.parse(dataJsonStr),void 0!==window.tcart.products){var actualProductsObj=[],oldCountProducts=window.tcart.products.length,actualCountProducts;window.tcart.products.forEach((function(product){tcart__isEmptyObject(product)||"yes"===product.deleted||actualProductsObj.push(product)})),window.tcart.products=actualProductsObj,window.tcart.products.length!==oldCountProducts&&tcart__saveLocalObj()}if(window.tcart_maxstoredays){var maxStoreDays=parseInt(window.tcart_maxstoredays);maxStoreDays>0?window.tcart.updated>0&&(delta=1*(timestamp=Math.floor(Date.now()/1e3))-1*window.tcart.updated)>86400*maxStoreDays&&("object"==typeof localStorage&&(window.tcart.products=[],localStorage.setItem("tcart",JSON.stringify(window.tcart))),window.tcart=tcart__nullObj()):0===maxStoreDays&&(window.tcart=tcart__nullObj())}else window.tcart.updated>0&&(delta=1*(timestamp=Math.floor(Date.now()/1e3))-1*window.tcart.updated)>2592e3&&(window.tcart=tcart__nullObj());"y"===window.tcart_dontstore&&(window.tcart=tcart__nullObj()),delete window.tcart.currency,delete window.tcart.currency_txt,delete window.tcart.currency_txt_l,delete window.tcart.currency_txt_r,delete window.tcart.currency_side,delete window.tcart.currency_sep,delete window.tcart.currency_dec,window.tcart.currency="$",window.tcart.currency_side="l",window.tcart.currency_sep=".",window.tcart.currency_dec="",window.tcart.delivery&&delete window.tcart.delivery,window.tcart.promocode&&delete window.tcart.promocode;var cartBlock=document.querySelector(".t706"),paymentCurrency=cartBlock.getAttribute("data-project-currency");paymentCurrency&&(window.tcart.currency=paymentCurrency),window.tcart.currency_txt=window.tcart.currency;var projectCurrency=cartBlock.getAttribute("data-project-currency-side");"r"==projectCurrency&&(window.tcart.currency_side="r"),"l"==window.tcart.currency_side?(window.tcart.currency_txt_l=window.tcart.currency_txt+"",window.tcart.currency_txt_r=""):(window.tcart.currency_txt_r=" "+window.tcart.currency_txt,window.tcart.currency_txt_l=""),"."==(projectCurrency=cartBlock.getAttribute("data-project-currency-sep"))||","==projectCurrency?window.tcart.currency_sep=projectCurrency:"$"==window.tcart.currency||"€"==window.tcart.currency||"USD"==window.tcart.currency||"EUR"==window.tcart.currency?window.tcart.currency_sep=".":window.tcart.currency_sep=",",projectCurrency=cartBlock.getAttribute("data-project-currency-dec"),window.tcart.currency_dec="00"==projectCurrency?projectCurrency:"",delete window.tcart.system;var paymentSystem=cartBlock.getAttribute("data-payment-system");window.tcart.system=paymentSystem||"none";var minimumOrderAmount=cartBlock.getAttribute("data-cart-minorder");if(minimumOrderAmount>0&&void 0===window.tcart_minorder){minimumOrderAmount*=1,window.tcart_minorder=minimumOrderAmount;var minimumOrderHtml='<div class="t706__cartwin-prodamount-minorder t706__minimal"><span>'+tcart_dict("minimumOrder")+": "+tcart__showPrice(minimumOrderAmount)+"</span></div>",minimumOrderErrorHtml='<p data-rule-filled="true" class="t-form__errorbox-item js-rule-error js-rule-error-minorder" style="display: none;">'+tcart_dict("minimumOrder")+": "+tcart__showPrice(minimumOrderAmount)+"</p>";document.querySelector(".t706__cartwin-prodamount-wrap").insertAdjacentHTML("afterbegin",minimumOrderHtml),document.querySelector(".t706__cartwin-totalamount-wrap").insertAdjacentHTML("afterbegin",minimumOrderHtml),document.querySelector(".js-errorbox-all .t-form__errorbox-text").insertAdjacentHTML("beforeend",minimumOrderErrorHtml)}var minimumQuantity=cartBlock.getAttribute("data-cart-mincntorder");if(minimumQuantity>0&&void 0===window.tcart_mincntorder){minimumQuantity*=1,window.tcart_mincntorder=minimumQuantity;var minimumQuantityHtml='<div class="t706__cartwin-prodamount-mincntorder t706__minimal"><span>'+tcart_dict("minimumQuantity")+": "+minimumQuantity+"</span></div>",minimumQuantityErrorHtml='<p data-rule-filled="true"  class="t-form__errorbox-item js-rule-error js-rule-error-minquantity" style="display: none;">'+tcart_dict("minimumQuantity")+": "+minimumQuantity+"</p>";document.querySelector(".t706__cartwin-prodamount-wrap").insertAdjacentHTML("afterbegin",minimumQuantityHtml),document.querySelector(".t706__cartwin-totalamount-wrap").insertAdjacentHTML("afterbegin",minimumQuantityHtml),document.querySelector(".js-errorbox-all .t-form__errorbox-text").insertAdjacentHTML("beforeend",minimumQuantityErrorHtml)}tcart__addDelivery(),tcart__updateTotalProductsinCartObj()}function tcart__saveLocalObj(){if(window.tcart_newDeliveryActive&&window.tcart.amount&&window.tcart.total&&tcart__rerenderDeliveryServices(),"y"!==window.tcart_dontstore&&(void 0===window.tcart_maxstoredays||0!=window.tcart_maxstoredays)&&"object"==typeof window.tcart){window.tcart.updated=Math.floor(Date.now()/1e3);var dataJsonStr=JSON.stringify(window.tcart);if("object"==typeof localStorage)try{localStorage.setItem("tcart",dataJsonStr)}catch(e){console.error("Your web browser does not support storing a Cart data locally.")}}}function tcart__syncProductsObject__LStoObj(){if("y"!==window.tcart_dontstore&&(void 0===window.tcart_maxstoredays||0!=window.tcart_maxstoredays)&&"object"==typeof localStorage)try{var lsJsonStr=localStorage.getItem("tcart"),lsJsonObj=JSON.parse(lsJsonStr);if("object"==typeof lsJsonObj.products){var actualProductsObj=[],oldCountProducts=lsJsonObj.products.length,actualCountProducts;lsJsonObj.products.forEach((function(product){!tcart__isEmptyObject(product)&&"yes"!==product.deleted&&product.quantity>0&&actualProductsObj.push(product)})),window.tcart.products=actualProductsObj,window.tcart.products.length!==oldCountProducts&&tcart__saveLocalObj(),tcart__updateTotalProductsinCartObj()}}catch(e){}}function tcart__addEvents(){var body=document.querySelector("body"),cartIcon=document.querySelector(".t706__carticon");cartIcon&&cartIcon.addEventListener("click",(function(){tcart__openCart()})),body.addEventListener("click",(function(e){e.target&&e.target.closest('a[href="#opencart"]')&&(tcart__openCart(),e.preventDefault())}));var cartClose=document.querySelector(".t706__cartwin-close");cartClose&&cartClose.addEventListener("click",(function(){tcart__closeCart()}));var cartCloseBtn=document.querySelector(".t706__cartwin-closebtn");cartCloseBtn&&cartCloseBtn.addEventListener("click",(function(){tcart__closeCart()})),document.querySelector(".t706 .js-form-proccess")&&document.querySelector(".t706 .js-form-proccess").setAttribute("data-formcart","y"),document.querySelector(".t706__cartwin").addEventListener("mousedown",(function(e){if(e.target==this){var windowWidth,maxScrollBarWidth=17,windowWithoutScrollBar=window.innerWidth-17;if(e.clientX>windowWithoutScrollBar)return;tcart__closeCart()}})),"y"!==window.tcart_dontstore&&window.addEventListener("storage",(function(e){if(e.isTrusted&&!window.clearTCart&&!document.hasFocus()&&"tcart"===e.key){try{var lsJsonStr=localStorage.getItem("tcart"),lsJsonObj=JSON.parse(lsJsonStr);"object"==typeof lsJsonObj.products&&(window.tcart.products=lsJsonObj.products,tcart__updateTotalProductsinCartObj())}catch(e){}tcart__reDrawCartIcon(),body.classList.contains("t706__body_cartwinshowed")&&(window.tcart_newDeliveryActive&&window.tcart.amount&&window.tcart.total&&tcart__rerenderDeliveryServices(),tcart__reDrawProducts(),tcart__reDrawTotal())}}))}function tcart__addEvent__links(){var recs=document.querySelectorAll(".r"),body=document.querySelector("body");Array.prototype.forEach.call(recs,(function(rec){rec.addEventListener("click",(function(e){var cartBtn=e.target.closest('[href^="#order"]')?e.target.closest('[href^="#order"]'):"";if(cartBtn&&(e.preventDefault(),!e.target.classList.contains("t1002__addBtn")&&!e.target.closest(".t1002__addBtn"))){var btnForm=cartBtn.closest("form");if(btnForm){var arErrors=window.tildaForm.validate(btnForm);if(window.tildaForm.showErrors(btnForm,arErrors))return!1}if("yes"!=cartBtn.getAttribute("data-dbclk-prevent")){cartBtn.setAttribute("data-dbclk-prevent","yes"),setTimeout((function(){cartBtn.removeAttribute("data-dbclk-prevent")}),1e3),(body.classList.contains("t-body_popupshowed")||document.querySelectorAll(".t-popup.t-popup_show").length>0)&&(body.classList.remove("t-body_popupshowed"),Array.prototype.forEach.call(document.querySelectorAll(".t-popup"),(function(popup){popup.classList.remove("t-popup_show")})),setTimeout((function(){Array.prototype.forEach.call(document.querySelectorAll(".t-popup:not(.t-popup_show)"),(function(popup){popup.style.display="none"}))}),300),tcart__clearProdUrl());var cartBtnLink=cartBtn.getAttribute("href"),price="0",name="",img="",sku="",lid="",uid="",recid="",inv="",single="",unit="",portion="",pack_label="",pack_m="",pack_x="",pack_y="",pack_z="";if("#order:"===cartBtnLink.substring(0,7)){var productData=cartBtnLink.substring(7);if(productData){if(productData.indexOf(":::")>0){var imgLinkPos=productData.indexOf(":::");if(productData.indexOf("=")>0&&productData.indexOf("=")<productData.indexOf(":::")){var imgLink=productData.substring(imgLinkPos+3);productData=productData.substring(0,imgLinkPos)}}if(productData.indexOf("=")>0){var productDataParams=productData.split("=");productDataParams[0]&&(name=productDataParams[0]),productDataParams[1]&&(price=productDataParams[1]),price=tcart__cleanPrice(price)}else name=productData;if(void 0!==imgLink&&""!==imgLink&&imgLink.indexOf("=")>0){var imgLinkArr=imgLink.split("=");imgLinkArr[0]&&imgLinkArr[1]&&"image"==imgLinkArr[0]&&(imgLinkArr[1].indexOf("tildacdn.com")>0||imgLinkArr[1].indexOf("tildacdn.info")>0)&&(img=imgLinkArr[1])}""==recid&&(recid=cartBtn.closest(".r").getAttribute("id")?cartBtn.closest(".r").getAttribute("id").replace("rec",""):"")}}var productElement=cartBtn.closest(".js-product");if(productElement){if(""==name){var elementName=productElement.querySelector(".js-product-name");name=elementName?elementName.textContent:""}if(""==price||0==price){var elementPrice=productElement.querySelector(".js-product-price");elementPrice&&(price=elementPrice.classList.contains("js-store-prod-price-range-val")?elementPrice.getAttribute("data-product-price-def"):elementPrice.textContent),price=tcart__cleanPrice(price)}if(""==img)if(productElement.getAttribute("data-product-img"))img=productElement.getAttribute("data-product-img");else{var imgDiv=productElement.querySelector(".js-product-img");if(imgDiv){var original=imgDiv.getAttribute("data-original")||"";if(original.length>0)img=original;else if("IMG"==imgDiv.tagName)img=imgDiv.getAttribute("src");else if("DIV"==imgDiv.tagName){img="";var imgCss=getComputedStyle(imgDiv)["background-image"];imgCss&&(img=imgCss.replace("url(","").replace(")","").replace(/"/gi,""))}}}if(""==lid&&(lid=productElement.getAttribute("data-product-lid")||""),""==uid&&(uid=productElement.getAttribute("data-product-uid")||""),""==recid){var recidAttr=productElement.closest(".r").getAttribute("id");recid=recidAttr?recidAttr.replace("rec",""):""}""==inv&&(inv=productElement.getAttribute("data-product-inv")||""),unit=productElement.getAttribute("data-product-unit")||"",portion=productElement.getAttribute("data-product-portion")||"",single=productElement.getAttribute("data-product-single")||"";var options=[],editionOptionsElements=productElement.querySelectorAll(".js-product-edition-option");Array.prototype.forEach.call(editionOptionsElements,(function(optionsElement){var optionName=optionsElement.querySelector(".js-product-edition-option-name").textContent,selectedOption=optionsElement.querySelector("option:checked");if(selectedOption){var optionVariant=selectedOption.value,optionPrice=selectedOption.getAttribute("data-product-edition-variant-price");if(optionPrice=tcart__cleanPrice(optionPrice),optionName&&optionVariant){var optionObj={};""!=optionName&&(optionName=tcart__escapeHtml(optionName)),""!=optionVariant&&(optionVariant=(optionVariant=tcart__escapeHtml(optionVariant)).replace(/(?:\r\n|\r|\n)/g,"")),optionName.length>1&&":"==optionName.charAt(optionName.length-1)&&(optionName=optionName.substring(0,optionName.length-1)),optionObj.option=optionName,optionObj.variant=optionVariant,optionObj.price=optionPrice,options.push(optionObj)}}}));var optionsElements=productElement.querySelectorAll(".js-product-option");Array.prototype.forEach.call(optionsElements,(function(optionsElement){var optionName=optionsElement.querySelector(".js-product-option-name").textContent,selectedOption=optionsElement.querySelector("option:checked");if(selectedOption){var optionVariant=selectedOption.value,optionPrice=selectedOption.getAttribute("data-product-variant-price");if(optionPrice=tcart__cleanPrice(optionPrice),void 0!==optionName&&void 0!==optionVariant){var optionObj={};""!=optionName&&(optionName=tcart__escapeHtml(optionName)),""!=optionVariant&&(optionVariant=(optionVariant=tcart__escapeHtml(optionVariant)).replace(/(?:\r\n|\r|\n)/g,"")),optionName.length>1&&":"==optionName.charAt(optionName.length-1)&&(optionName=optionName.substring(0,optionName.length-1)),optionObj.option=optionName,optionObj.variant=optionVariant,optionObj.price=optionPrice,options.push(optionObj)}}})),""==sku&&(sku=productElement.querySelector(".js-product-sku")?productElement.querySelector(".js-product-sku").textContent.trim():""),""==pack_label&&(pack_label=productElement.getAttribute("data-product-pack-label")||""),""==pack_m&&(pack_m=productElement.getAttribute("data-product-pack-m")||""),""==pack_x&&(pack_x=productElement.getAttribute("data-product-pack-x")||""),""==pack_y&&(pack_y=productElement.getAttribute("data-product-pack-y")||""),""==pack_z&&(pack_z=productElement.getAttribute("data-product-pack-z")||"")}var productUrl=productElement?productElement.getAttribute("data-product-url"):"",isOrderButtonActive=productElement?productElement.querySelector('a[href="#order"]:not(.t-btn)'):"",settedLinkInToProduct=productElement?productElement.querySelector('.js-product-link:not([href="#prodpopup"]):not([href="#order"])'):"";if(settedLinkInToProduct)var settedLinkInToProductHref=settedLinkInToProduct.getAttribute("href");if(!productUrl&&settedLinkInToProductHref?productUrl=settedLinkInToProductHref:!productUrl&&recid&&lid&&!isOrderButtonActive?productUrl=window.location.origin+window.location.pathname+"#!/tproduct/"+recid+"-"+lid:productUrl||(productUrl=window.location.origin+window.location.pathname+"#rec"+recid),""!=name||""!=price&&0!=price){""==name&&(name="NoName"),""==price&&(price=0),""!=name&&(name=tcart__escapeHtml(name)),""!=img&&(img=tcart__escapeHtmlImg(img));var productObj={};productObj.name=name,productObj.price=price,productObj.img=img,productObj.recid=recid,productObj.lid=lid,productObj.pack_label=pack_label,productObj.pack_m=pack_m,productObj.pack_x=pack_x,productObj.pack_y=pack_y,productObj.pack_z=pack_z,productObj.url=productUrl,options&&options.length>0&&(productObj.options=options),sku&&(sku=tcart__escapeHtml(sku),productObj.sku=sku),uid&&(productObj.uid=uid),lid&&(productObj.lid=lid),inv>0&&(productObj.inv=parseInt(inv,10)),unit&&(productObj.unit=unit),portion&&(productObj.portion=portion),single&&(productObj.single=single);var quantityBtns=cartBtn.parentElement.querySelector(".t-store__prod__quantity");if(quantityBtns){var input=quantityBtns.querySelector(".t-store__prod__quantity-input"),count=parseInt(input.value,10);if(!isNaN(count)&&count>0){productObj.quantity=count,input.value=1;var changeEvent=new Event("change");input.dispatchEvent(changeEvent)}}if(tcart__addProduct(productObj),"y"==window.tcart_sendevent_onadd)try{Tilda.sendEcommerceEvent("add",[productObj])}catch(e){if(window.Tilda&&"function"==typeof Tilda.sendEventToStatistics){var virtPage="/tilda/cart/add/";recid>0&&(virtPage+=recid),uid&&uid>0?virtPage+="-u"+uid:lid&&lid>0&&(virtPage+="-"+lid);var virtTitle=name,virtPrice=price;Tilda.sendEventToStatistics(virtPage,virtTitle,window.location.href,virtPrice)}}}}}}))}))}function tcart__addProduct(productObj){var timestamp=Math.floor(Date.now()/1e3),cartIcon=document.querySelector(".t706__carticon");tcart__syncProductsObject__LStoObj();var products=window.tcart.products,isInCart="";if(products.length>0&&Array.prototype.forEach.call(products,(function(product,index){var isEqualOptions="y",isEqualSKU="";if("y"==window.tcart_oneproduct){if(product.name==productObj.name&&product.price==productObj.price){if(null==product.options&&null==productObj.options&&null==product.sku&&null==productObj.sku)return isInCart="yes",!1;if(null==product.options&&null==productObj.options&&null!=product.sku&&null!=productObj.sku&&product.sku==productObj.sku)return isInCart="yes",!1;if("object"==typeof product.options&&"object"==typeof productObj.options&&(Array.prototype.forEach.call(product.options,(function(option,index){if("object"==typeof option&&"object"==typeof productObj.options[index]){if(option.option!==productObj.options[index].option||option.variant!==productObj.options[index].variant||option.price!==productObj.options[index].price)return isEqualOptions=!1}else if(null==option||null==productObj.options[index])return isEqualOptions=!1})),product.sku===productObj.sku&&(isEqualSKU="y"),"y"===isEqualOptions&&"y"===isEqualSKU))return parseInt(window.tcart.products[index].quantity,10)===parseInt(productObj.inv,10)&&alert(tcart_dict("limitReached")),isInCart="yes",!1}}else if(product.name==productObj.name&&product.price==productObj.price&&product.portion==productObj.portion&&product.single==productObj.single&&("object"==typeof product.options&&"object"==typeof productObj.options&&Array.prototype.forEach.call(product.options,(function(option,index){if("object"==typeof option&&"object"==typeof productObj.options[index]){if(option.option!==productObj.options[index].option||option.variant!==productObj.options[index].variant||option.price!==productObj.options[index].price)return isEqualOptions=!1}else if(void 0===option||void 0===productObj.options[index])return isEqualOptions=!1})),product.sku===productObj.sku&&(isEqualSKU="y"),"y"===isEqualOptions&&"y"===isEqualSKU)){var inv=parseInt(productObj.inv,10),quantity=parseInt(productObj.quantity,10),quantityInCart=parseInt(window.tcart.products[index].quantity,10);return quantityInCart===inv?(alert(tcart_dict("limitReached")),isInCart="yes",!1):(void 0!==productObj.quantity?quantityInCart+quantity>inv?(alert(tcart_dict("limitReached")),isInCart="yes",window.tcart.products[index].quantity=inv):window.tcart.products[index].quantity+=quantity:window.tcart.products[index].quantity++,window.tcart.products[index].amount=window.tcart.products[index].price*window.tcart.products[index].quantity,window.tcart.products[index].amount=tcart__roundPrice(window.tcart.products[index].amount),window.tcart.products[index].ts=timestamp,isInCart="yes",!1)}})),""==isInCart){if(void 0===productObj.quantity?(productObj.quantity=1,productObj.amount=productObj.price):productObj.amount=tcart__roundPrice(productObj.price*productObj.quantity),productObj.ts=timestamp,""===productObj.pack_m||0===parseInt(productObj.pack_m,10)){var gramms=!1,index=0;["GRM","KGM","TNE"].forEach((function(unit,i){unit===productObj.unit&&(gramms=!0,index=i)})),gramms&&(productObj.pack_m=productObj.portion*Math.pow(1e3,index))}window.tcart.products.push(productObj)}tcart__updateTotalProductsinCartObj(),tcart__reDrawCartIcon(),tcart__saveLocalObj(),"yes"==document.querySelector(".t706").getAttribute("data-opencart-onorder")?setTimeout((function(){tcart__openCart()}),10):cartIcon&&(cartIcon.classList.add("t706__carticon_neworder"),setTimeout((function(){cartIcon.classList.remove("t706__carticon_neworder")}),2e3))}function tcart__updateProductsPrice(){var now=Math.floor(Date.now()/1e3),timestamp;if(window.tcart&&window.tcart.updated&&window.tcart.products&&window.tcart.products.length&&(now-parseInt(window.tcart.updated,10))/3600>12){var dataCart={};dataCart.prodamount=window.tcart.prodamount,dataCart.discount=window.tcart.discount,dataCart.products=JSON.stringify(window.tcart.products),dataCart.amount=window.tcart.amount,dataCart.total=window.tcart.total,dataCart.updated=window.tcart.updated,window.tcart_endpoint||(window.tcart_endpoint="store.tildacdn.com");var apiUrl="https://"+window.tcart_endpoint+"/api/getpriceproducts/",xhr=new XMLHttpRequest;xhr.open("POST",apiUrl),xhr.onload=function(){if(xhr.status>=200&&xhr.status<400){var data=xhr.responseText;"string"==typeof data&&"{"===data.substr(0,1)||console.error("Can't get array.");var productsArr=[];try{var dataObj=JSON.parse(data);if("error"===dataObj.status)productsArr=dataObj.bad;else if("success"===dataObj.status)return}catch(e){console.error("Can't get JSON.",data)}if(""===productsArr)return void console.error("Something went wrong. Can't get products array.");if(0===productsArr.length)return void console.error("Nothing to update.");Object.keys(productsArr).forEach((function(i){var badUid=productsArr[i].uid||productsArr[i].lid;"PRICE_CHANGED"===productsArr[i].error&&window.tcart.products.forEach((function(product,index){var uid=product.uid||product.lid;if(badUid===uid&&(void 0!==product.options&&void 0!==productsArr[i].options&&void 0!==productsArr[i].variant&&product.options.forEach((function(option){if(option.variant===productsArr[i].variant)return window.tcart.products[index].amount=parseFloat(productsArr[i].last_amount),void(window.tcart.products[index].price=parseFloat(productsArr[i].last_price))})),void 0===product.options&&void 0===productsArr[i].options&&void 0===productsArr[i].variant))return window.tcart.products[index].amount=parseFloat(productsArr[i].last_amount),void(window.tcart.products[index].price=parseFloat(productsArr[i].last_price))})),"LESS_PRODUCTS"!==productsArr[i].error&&"NOT_FOUND_PRODUCT"!==productsArr[i].error||window.tcart.products.forEach((function(product,index){var uid=product.uid||product.lid;badUid===uid&&(window.tcart.products[index]={})}))})),tcart__saveLocalObj(),tcart__reDrawProducts(),tcart__updateTotalProductsinCartObj(),tcart__reDrawCartIcon(),tcart__reDrawTotal()}},xhr.onerror=function(error){tcart_changeEndpoint(error,(function(){tcart__updateProductsPrice()}))},xhr.send(dataCart)}}function tcart__updateTotalProductsinCartObj(){var products=window.tcart.products;if(products.length>0){var total=0,prodAmount=0;Array.prototype.forEach.call(products,(function(product){tcart__isEmptyObject(product)||"yes"===product.deleted||("y"===product.single?total+=1:total+=1*product.quantity,prodAmount=1*prodAmount+1*product.amount)})),prodAmount=tcart__roundPrice(prodAmount),window.tcart.total=total,window.tcart.prodamount=prodAmount;var amount=prodAmount;if("object"==typeof window.tcart.promocode&&window.tcart.promocode.promocode){var discountSum=0;window.tcart.promocode.discountsum>0?discountSum=1*window.tcart.promocode.discountsum:window.tcart.promocode.discountpercent>0?discountSum=tcart__roundPrice(amount*window.tcart.promocode.discountpercent*1/100):console.error("Cart Some error."),(amount=tcart__roundPrice(amount-=discountSum))<0&&(amount=0),window.tcart.prodamount_discountsum=discountSum,window.tcart.prodamount_withdiscount=amount}else delete window.tcart.prodamount_discountsum,delete window.tcart.prodamount_withdiscount;"object"==typeof window.tcart.delivery&&void 0!==window.tcart.delivery.price&&window.tcart.delivery.price>0&&window.tcart.prodamount>0&&(window.tcart.delivery.freedl>0&&amount>=window.tcart.delivery.freedl||(amount+=1*window.tcart.delivery.price)),amount>0&&(amount=tcart__roundPrice(amount)),window.tcart.amount=amount}else window.tcart.total=0,window.tcart.prodamount=0,window.tcart.amount=0}function tcart__reDrawCartIcon(){var cart=window.tcart,cartIcon=document.querySelector(".t706__carticon"),t1004_cartCounter=document.querySelector(".t1004 .js-carticon-counter");if(cartIcon){var cartIconCounter=cartIcon.querySelector(".js-carticon-counter"),cartIconText=document.querySelector(".t706__carticon-text");1==cart.total&&(cartIcon.style.opacity=0,cartIcon.style.transition="opacity .3s",cartIcon.style.opacity=1)}if(void 0!==cart.products&&cart.products.length>0&&cart.total>0?(cartIcon&&cartIcon.classList.add("t706__carticon_showed"),cartIconCounter&&(cartIconCounter.innerHTML=cart.total),t1004_cartCounter&&(t1004_cartCounter.innerHTML=cart.total)):(cartIcon&&cartIcon.classList.remove("t706__carticon_showed"),cartIconCounter&&(cartIconCounter.innerHTML=""),t1004_cartCounter&&(t1004_cartCounter.innerHTML="")),cartIconCounter&&(""===tcart__showPrice(window.tcart.prodamount)?cartIconText.style.display="none":(cartIconText.style.display="block",cartIconText.innerHTML="= "+tcart__showPrice(window.tcart.prodamount))),"y"===window.lazy||"yes"===document.querySelector("#allrecords").getAttribute("data-tilda-lazy"))try{tcart__onFuncLoad("t_lazyload_update",(function(){t_lazyload_update()}))}catch(e){console.error("js lazyload not loaded")}}function tcart__openCart(){var submitBtn=document.querySelector(".t706 .t-form__submit button"),cartIcon=document.querySelector(".t706__carticon");cartIcon&&cartIcon.classList.remove("t706__carticon_showed"),document.querySelector("body").classList.add("t706__body_cartwinshowed");var customDelivery=document.getElementById("customdelivery");customDelivery&&customDelivery.querySelector(".tcart__preloader")||(submitBtn.classList.remove("t706__submit_disable"),submitBtn.removeAttribute("disabled")),void 0!==window.tildaForm.hideErrors&&window.tildaForm.hideErrors(document.querySelector(".t706 .t-form")),setTimeout((function(){tcart__lockScroll()}),500),tcart__syncProductsObject__LStoObj(),tcart__updateProductsPrice();var cartWindow=document.querySelector(".t706__cartwin");if(cartWindow.style.opacity=0,cartWindow.style.transition="opacity .3s",cartWindow.classList.add("t706__cartwin_showed"),setTimeout((function(){cartWindow.style.opacity=1}),0),tcart__reDrawProducts(),tcart__reDrawTotal(),document.addEventListener("keyup",tcart__keyUpFunc),"y"===window.lazy||"yes"===document.querySelector("#allrecords").getAttribute("data-tilda-lazy"))try{tcart__onFuncLoad("t_lazyload_update",(function(){t_lazyload_update()}))}catch(e){console.error("js lazyload not loaded")}if(Array.prototype.forEach.call(document.querySelectorAll(".t706 .t-form .t-radio__wrapper-delivery"),(function(wrapper){if("y"===wrapper.getAttribute("data-delivery-services")&&!window.tcart_newDeliveryActive)if("undefined"!=typeof tcart_newDelivery&&"function"==typeof tcart_newDelivery.init)tcart_newDelivery.init(window.tcart__ymapApiKey);else{var deliveryScriptLink="https://static.tildacdn.com/js/tilda-delivery-1.0.min.js";if(!document.querySelector('script[src^="'+deliveryScriptLink+'"]')){var deliveryScript=document.createElement("script");deliveryScript.type="text/javascript",deliveryScript.src=deliveryScriptLink,deliveryScript.onload=function(){tcart_newDelivery.init(window.tcart__ymapApiKey);var deliveryCSSLink="https://static.tildacdn.com/css/tilda-delivery-1.0.min.css",deliveryCSS;document.querySelector('link[href^="'+deliveryCSSLink+'"]')||document.querySelector("body").insertAdjacentHTML("beforeend",'<link rel="stylesheet" href="'+deliveryCSSLink+'">')},deliveryScript.onerror=function(textStatus){console.error("Upload script failed, error: "+textStatus)},document.head.appendChild(deliveryScript)}}})),document.querySelectorAll(".t706 .t-form .t-input-group_sf").length>0){var localKey,savedContacts,cartKey;if("object"==typeof sessionStorage)try{cartKey=sessionStorage.getItem("cartkey")}catch(e){console.error("Your web browser does not support storing a 'cartkey' data locally a session.")}else console.error("Your web browser does not support sessionStorage.");var restoreFieldsFromLS=function(){if(savedContacts){var datacipherScriptLink="https://static.tildacdn.com/js/tilda-cart-datacipher-1.0.min.js";if(!document.querySelector('script[src^="'+datacipherScriptLink+'"]')){var datacipherScript=document.createElement("script");datacipherScript.type="text/javascript",datacipherScript.src=datacipherScriptLink,datacipherScript.onload=function(){var decodedStr=tcart__dataCipher.decode(cartKey,savedContacts);try{var cartObj=JSON.parse(decodedStr);void 0===window.deliveryUserFieldsAutoComplete&&(window.deliveryUserFieldsAutoComplete={}),cartObj.forEach((function(cartWindow){try{var radioElem=document.querySelector('.t706 .t-form [type="radio"][name="'+cartWindow.name+'"][value="'+cartWindow.value+'"]'),triggerChangeEvent;if(radioElem)if(radioElem.checked=!0,radioElem)/msie|trident/i.test(navigator.userAgent)?(triggerChangeEvent=document.createEvent("Event")).initEvent("change",!0,!1):triggerChangeEvent=new Event("change"),radioElem.dispatchEvent(triggerChangeEvent);"paymentsystem"===cartWindow.name&&radioElem.dispatchEvent(new Event("change"))}catch(e){}var deliveryKeys;if(!["street","house","entrance","floor","aptoffice","phone","entrancecode","comment","postalcode","country","userinitials","onelineaddress"].some((function(key){var truly=cartWindow.name==="tildadelivery-"+key;return truly&&(window.deliveryUserFieldsAutoComplete[key]=cartWindow.value),truly}))){var formField=document.querySelector('.t706 .t-form [name="'+cartWindow.name+'"]:not([type="radio"])');formField&&""===formField.value&&"tildadelivery-city"!==cartWindow.name?(formField.value=cartWindow.value,"tildaspec-phone-part[]"===cartWindow.name&&formField.dispatchEvent(new Event("input"))):"tildadelivery-city"===cartWindow.name&&formField.value!==cartWindow.value?(formField.setAttribute("data-option-selected",!1),formField.value=cartWindow.value,formField.dispatchEvent(new Event("keyup")),formField.dispatchEvent(new Event("blur"))):"tildaspec-phone-part[]-code"===cartWindow.name&&document.querySelector('.t706 .t-form [data-phonemask-code="'+cartWindow.value+'"]').click()}}))}catch(e){console.error("Can't get JSON."+decodedStr)}},datacipherScript.onerror=function(textStatus){console.error("Upload script failed, error: "+textStatus)},document.head.appendChild(datacipherScript)}}};if("object"==typeof localStorage){try{localKey=localStorage.getItem("tcart_savedcontacts_localkey"),savedContacts=localStorage.getItem("tcart_savedcontacts"),localKey||(localKey=Math.random().toString(),localStorage.setItem("tcart_savedcontacts_localkey",localKey));var post={data:btoa(JSON.stringify({projectid:document.querySelector(".t-records").getAttribute("data-tilda-project-id"),pageid:document.querySelector(".t-records").getAttribute("data-tilda-page-id"),localstoragekey:localKey}))};if(cartKey)restoreFieldsFromLS();else{var xhr=new XMLHttpRequest;xhr.open("POST","https://store-tools.tildacdn.com/api/v1/getkeyforsavedcontacts/"),xhr.onload=function(){if(xhr.status>=200&&xhr.status<400){var data=xhr.responseText;"string"==typeof data&&"{"===data.substr(0,1)||console.error("Can't get array.");try{var dataObj=JSON.parse(data);if(dataObj.error,dataObj.error,dataObj.error,"object"==typeof dataObj.data&&Object.prototype.hasOwnProperty.call(dataObj.data,"cartkey")){cartKey=dataObj.data.cartkey;try{sessionStorage.setItem("cartkey",cartKey)}catch(error){console.error("Your web browser does not support storing a 'cartkey' data locally a session.")}restoreFieldsFromLS()}}catch(e){console.error("Can't get JSON. It's incorrect: ",data),localStorage.removeItem("tcart_savedcontacts"),localStorage.removeItem("tcart_savedcontacts_localkey")}}},xhr.send(post)}}catch(e){console.error("Your web browser does not support storing a 'tcart_savedcontacts' data locally. "+e)}var beforeSendHandler=function(event){var isChecked=event.target.querySelector(".t-input-group_sf input").checked;if(cartKey&&isChecked){var tcart__saveFormFields=function(){var serializeArray=tcart__serializeCartForm(event.target),array=[];serializeArray.forEach((function(el){if(-1===el.name.indexOf("form-spec-")&&(-1===el.name.indexOf("tildaspec-")||"tildaspec-phone-part[]"===el.name)&&-1===el.name.indexOf("formservices")&&""!==el.value&&(array.push(el),"tildaspec-phone-part[]"===el.name)){var code=event.target.querySelector('[name="'+el.name+'"]').getAttribute("data-phonemask-code");array.push({name:"tildaspec-phone-part[]-code",value:code})}}));var json=JSON.stringify(array),savedContacts=tcart__dataCipher.encode(cartKey,json);localStorage.setItem("tcart_savedcontacts",savedContacts)},datacipherScriptLink="https://static.tildacdn.com/js/tilda-cart-datacipher-1.0.min.js";if(document.querySelector('script[src^="'+datacipherScriptLink+'"]'))tcart__saveFormFields();else{var datacipherScript=document.createElement("script");datacipherScript.type="text/javascript",datacipherScript.src=datacipherScriptLink,document.head.appendChild(datacipherScript),datacipherScript.onload=function(){tcart__saveFormFields()}}}};"undefined"!=typeof jQuery?$(".t706 .t-form").on("tildaform:beforesend",beforeSendHandler):document.querySelector(".t706 .t-form").addEventListener("tildaform:beforesend",beforeSendHandler)}else console.error("Your web browser does not support localstorage.")}}function tcart__reDrawProducts(){var cartWindowProducts=document.querySelector(".t706__cartwin-products");if(void 0!==window.tcart.products){var actualProductsObj=[],oldCountProducts=window.tcart.products.length,actualCountProducts;Array.prototype.forEach.call(window.tcart.products,(function(product){!tcart__isEmptyObject(product)&&"yes"!==product.deleted&&product.quantity>0&&actualProductsObj.push(product)})),window.tcart.products=actualProductsObj,window.tcart.products.length!==oldCountProducts&&tcart__saveLocalObj()}var hasImg="";if(actualProductsObj.length>0&&Array.prototype.forEach.call(actualProductsObj,(function(product){""!=product.img&&(hasImg="yes")})),actualProductsObj.length>0){var str="";Array.prototype.forEach.call(actualProductsObj,(function(product,index){str+='<div class="t706__product" data-cart-product-i="'+index+'">',"yes"==hasImg&&(str+='<div class="t706__product-thumb"><div class="t706__product-imgdiv"'+(""!==product.img?"style=\"background-image:url('"+product.img+"');\"":"")+"></div></div>"),str+='<div class="t706__product-title t-descr t-descr_sm">',product.url?str+='<a style="color: inherit" target="_blank" href="'+product.url+'">'+product.name+"</a>":str+=product.name,product.options&&product.options.length>0&&(str+='<div class="t706__product-title__option">',Array.prototype.forEach.call(product.options,(function(option){str+="<div>"+option.option+": "+option.variant+"</div>"})),str+="</div>"),void 0!==product.sku&&""!=product.sku&&(str+='<div class="t706__product-title__option">',str+=product.sku,str+="</div>"),product.portion>0&&(str+='<div class="t706__product-title__portion">',str+=tcart__showPrice(product.price)+"/","1"!==product.portion&&(str+=product.portion+" "),str+=tcart_dict(product.unit)+"</div>"),str+="</div>","y"==window.tcart_oneproduct?str+='<div class="t706__product-plusminus t-descr t-descr_sm" style="display:none;"><span class="t706__product-quantity">'+product.quantity+"</span></div>":(str+='<div class="t706__product-plusminus t-descr t-descr_sm"><span class="t706__product-minus"><img src="https://static.tildacdn.com/lib/linea/c8eecd27-9482-6c4f-7896-3eb09f6a1091/arrows_circle_minus.svg" style="width:16px;height:16px;border:0"></span>',str+='<span class="t706__product-quantity">'+product.quantity+"</span>",str+='<span class="t706__product-plus"><img src="https://static.tildacdn.com/lib/linea/c47d1e0c-6880-dc39-ae34-521197f7fba7/arrows_circle_plus.svg" style="width:16px;height:16px;border:0"></span></div>'),product.portion>0?(str+='<div class="t706__product-amount--portion t-descr t-descr_sm">',product.amount>0&&(str+='<span class="t706__product-amount">'+tcart__showPrice(product.amount)+"</span>",str+='<span class="t706__product-portion">'+tcart__showWeight(product.quantity*product.portion,product.unit)+"</span>"),str+="</div>"):(str+='<div class="t706__product-amount t-descr t-descr_sm">',product.amount>0&&(str+=tcart__showPrice(product.amount)),str+="</div>"),str+='<div class="t706__product-del"><img src="https://static.tildacdn.com/lib/linea/1bec3cd7-e9d1-2879-5880-19b597ef9f1a/arrows_circle_remove.svg" style="width:20px;height:20px;border:0;"></div>',str+="</div>"})),cartWindowProducts.innerHTML=str,tcart__addEvents__forProducts();var submitBtn=document.querySelector(".t706 .t-form__submit button");submitBtn.classList.remove("t706__submit_disable"),submitBtn.removeAttribute("disabled")}else cartWindowProducts.innerHTML=""}function tcart__reDrawTotal(){document.querySelector(".t706__cartwin-prodamount").innerHTML=tcart__showPrice(window.tcart.prodamount),document.querySelector(".t706__cartwin-totalamount").innerHTML=tcart__showPrice(window.tcart.amount);var totalAmountInfo=document.querySelector(".t706__cartwin-totalamount-info"),totalAmountLabel,totalAmountValue;totalAmountInfo.innerHTML="","object"!=typeof window.tcart.promocode&&"object"!=typeof window.tcart.delivery||(totalAmountInfo.style.display="block",totalAmountLabel='<span class="t706__cartwin-totalamount-info_label">'+tcart_dict("subtotal")+":</span>",totalAmountValue='<span class="t706__cartwin-totalamount-info_value">'+tcart__showPrice(window.tcart.prodamount)+"</span>",totalAmountInfo.insertAdjacentHTML("beforeend",totalAmountLabel+totalAmountValue+"<br>")),"object"==typeof window.tcart.promocode&&(totalAmountLabel='<span class="t706__cartwin-totalamount-info_label">'+tcart_dict("promoCode")+" "+window.tcart.promocode.promocode+":</span>",totalAmountValue='<span class="t706__cartwin-totalamount-info_value">'+(window.tcart.promocode.discountpercent?" "+parseFloat(window.tcart.promocode.discountpercent)+"% ":"")+"</span>",totalAmountInfo.insertAdjacentHTML("beforeend",totalAmountLabel+totalAmountValue+"<br>"),totalAmountLabel='<span class="t706__cartwin-totalamount-info_label">'+tcart_dict("discount")+":</span>",totalAmountValue='<span class="t706__cartwin-totalamount-info_value">'+tcart__showPrice(window.tcart.prodamount_discountsum)+"</span>",totalAmountInfo.insertAdjacentHTML("beforeend",totalAmountLabel+totalAmountValue+"<br>"),window.tcart.prodamount_withdiscount>0?(totalAmountLabel='<span class="t706__cartwin-totalamount-info_label">'+tcart_dict("subtotalDiscount")+":</span>",totalAmountValue='<span class="t706__cartwin-totalamount-info_value">'+tcart__showPrice(window.tcart.prodamount_withdiscount)+"</span>",totalAmountInfo.insertAdjacentHTML("beforeend",totalAmountLabel+totalAmountValue+"<br>")):(totalAmountLabel='<span class="t706__cartwin-totalamount-info_label">'+tcart_dict("subtotalDiscount")+":</span>",totalAmountValue='<span class="t706__cartwin-totalamount-info_value"> 0</span>',totalAmountInfo.insertAdjacentHTML("beforeend",totalAmountLabel+totalAmountValue+"<br>"))),"object"==typeof window.tcart.delivery&&window.tcart.delivery.name&&window.tcart.delivery.price&&(window.tcart.delivery.price>0||window.tcart.delivery["service-id"])&&(window.tcart.delivery.freedl>0&&window.tcart.prodamount>=window.tcart.delivery.freedl&&(window.tcart.prodamount_withdiscount>=window.tcart.delivery.freedl||!window.tcart.prodamount_withdiscount)?(totalAmountLabel='<span class="t706__cartwin-totalamount-info_label">'+window.tcart.delivery.name+":</span>",totalAmountValue='<span class="t706__cartwin-totalamount-info_value"> 0 ('+tcart_dict("free")+")<br></span>",totalAmountInfo.insertAdjacentHTML("beforeend",totalAmountLabel+totalAmountValue)):window.tcart.delivery.price>0&&(totalAmountLabel='<span class="t706__cartwin-totalamount-info_label">'+window.tcart.delivery.name+":</span>",totalAmountValue='<span class="t706__cartwin-totalamount-info_value">'+tcart__showPrice(window.tcart.delivery.price)+"</span>",totalAmountInfo.insertAdjacentHTML("beforeend",totalAmountLabel+totalAmountValue+"<br>")));var prodAmountWrap=document.querySelector(".t706__cartwin-prodamount-wrap");0==window.tcart.prodamount?prodAmountWrap.style.display="none":prodAmountWrap.style.display="block",tcart__changeSubmitStatus();var totalAmountWrap=document.querySelector(".t706__cartwin-totalamount-wrap"),orderForm=document.querySelector(".t706__orderform");0==window.tcart.amount?totalAmountWrap.style.display="none":window.tcart.prodamount==window.tcart.amount?orderForm&&orderForm.offsetHeight>700?totalAmountWrap.style.display="block":totalAmountWrap.style.display="none":totalAmountWrap.style.display="block",window.tcart.promocode&&(totalAmountWrap.style.display="block",0==window.tcart.amount&&(document.querySelector(".t706__cartwin-totalamount").innerHTML="0")),window.tcart.delivery&&window.tcart.delivery.price>0&&(totalAmountWrap.style.display="block");var cartIconText=document.querySelector(".t706__carticon-text");cartIconText&&(cartIconText.innerHTML="= "+tcart__showPrice(window.tcart.prodamount))}function tcart__changeSubmitStatus(){var newDeliveryActive=window.tcart_newDeliveryActive,minOrderSetted=window.tcart_minorder>0,minQuantitySetted=window.tcart_mincntorder>0,submitBtn=document.querySelector(".t706 .t-form__submit button"),submit=document.querySelector(".t706 .t-submit"),minOrder=document.querySelector(".t706__cartwin-prodamount-minorder"),minCountOrder=document.querySelector(".t706__cartwin-prodamount-mincntorder");if(newDeliveryActive&&window.tcart.emptyDeliveryServices&&(window.tcart__errorHandler.show(),submitBtn.classList.add("t706__submit_disable"),submitBtn.setAttribute("disabled","disabled")),minOrderSetted&&minQuantitySetted){if(minOrderSetted&&(window.tcart.prodamount>=window.tcart_minorder?minOrder.style.display="none":minOrder.style.display="block"),minQuantitySetted&&(window.tcart.total>=window.tcart_mincntorder?minCountOrder.style.display="none":minCountOrder.style.display="block"),window.tcart.prodamount>=window.tcart_minorder&&window.tcart.total>=window.tcart_mincntorder){if(newDeliveryActive&&window.tcart.emptyDeliveryServices)return;submit.classList.remove("t706__submit_disable"),submitBtn.removeAttribute("disabled")}}else if(minOrderSetted||minQuantitySetted){if(minOrderSetted)if(window.tcart.prodamount>=window.tcart_minorder){if(newDeliveryActive&&window.tcart.emptyDeliveryServices)return;var customDelivery=document.getElementById("customdelivery");customDelivery&&customDelivery.querySelector(".tcart__preloader")||(minOrder.style.display="none",submitBtn.classList.remove("t706__submit_disable"),submitBtn.removeAttribute("disabled"))}else minOrder.style.display="block";if(minQuantitySetted)if(window.tcart.total>=window.tcart_mincntorder){if(newDeliveryActive&&window.tcart.emptyDeliveryServices)return;minCountOrder.style.display="none",submit.classList.remove("t706__submit_disable"),submitBtn.removeAttribute("disabled")}else minCountOrder.style.display="block"}else newDeliveryActive&&!window.tcart.emptyDeliveryServices&&(window.tcart__errorHandler.hide(),submit.classList.remove("t706__submit_disable"),submitBtn.removeAttribute("disabled"))}function tcart__addEvents__forProducts(){Array.prototype.forEach.call(document.querySelectorAll(".t706__product-plus"),(function(btn){btn.addEventListener("click",(function(){tcart__product__plus(this)}))})),Array.prototype.forEach.call(document.querySelectorAll(".t706__product-minus"),(function(btn){btn.addEventListener("click",(function(){tcart__product__minus(this)}))})),Array.prototype.forEach.call(document.querySelectorAll(".t706__product-del"),(function(btn){btn.addEventListener("click",(function(){tcart__product__del(this)}))})),Array.prototype.forEach.call(document.querySelectorAll(".t706__product-quantity"),(function(btn){btn.addEventListener("click",(function(){tcart__product__editquantity(this)}))}))}function tcart__closeCart(){var cart=window.tcart,submitBtn=document.querySelector(".t706 .t-form__submit button"),cartIcon=document.querySelector(".t706__carticon"),cartIconText=document.querySelector(".t706__carticon-text"),cartWindow=document.querySelector(".t706__cartwin");document.querySelector("body").classList.remove("t706__body_cartwinshowed"),tcart__unlockScroll(),submitBtn.classList.remove("t706__submit_disable"),submitBtn.removeAttribute("disabled"),"y"===window.tcart_dontstore&&(window.tcart&&cart.products&&(cart.products=[]),tcart__updateTotalProductsinCartObj(),tcart__reDrawCartIcon(),tcart__reDrawTotal()),cartIcon&&(cart.products&&cart.products.length>0&&cart.total>0?cartIcon.classList.add("t706__carticon_showed"):cartIcon.classList.remove("t706__carticon_showed")),cartIconText&&(cart.amount>0?cartIconText.style.display="block":cartIconText.style.display="none"),tcart__delZeroquantity_inCartObj(),document.removeEventListener("keyup",tcart__keyUpFunc),cartIcon&&cartIcon.classList.remove("t706__carticon_neworder"),cartWindow.style.transition="opacity .3s",cartWindow.style.opacity=0,setTimeout((function(){cartWindow.classList.remove("t706__cartwin_showed"),cartWindow.style.opacity="1"}),300),"yes"==window.tcart_success&&location.reload()}function tcart__keyUpFunc(e){27==e.keyCode&&tcart__closeCart()}function tcart__product__plus(buttonElement){var productElement=buttonElement.closest(".t706__product"),cartProductIndex=productElement.getAttribute("data-cart-product-i");(window.tcart.products[cartProductIndex]||(tcart__syncProductsObject__LStoObj(),null!=window.tcart.products[cartProductIndex]))&&(window.tcart.products[cartProductIndex].quantity>0&&void 0!==window.tcart.products[cartProductIndex].inv&&window.tcart.products[cartProductIndex].inv>0&&window.tcart.products[cartProductIndex].inv==window.tcart.products[cartProductIndex].quantity?alert(tcart_dict("limitReached")):(window.tcart.products[cartProductIndex].quantity++,window.tcart.products[cartProductIndex].amount=window.tcart.products[cartProductIndex].price*window.tcart.products[cartProductIndex].quantity,window.tcart.products[cartProductIndex].amount=tcart__roundPrice(window.tcart.products[cartProductIndex].amount),productElement.querySelector(".t706__product-quantity").innerHTML=window.tcart.products[cartProductIndex].quantity,"y"===window.tcart.products[cartProductIndex].single&&void 0!==window.tcart.products[cartProductIndex].portion&&(productElement.querySelector(".t706__product-portion").innerHTML=tcart__showWeight(window.tcart.products[cartProductIndex].quantity*window.tcart.products[cartProductIndex].portion,window.tcart.products[cartProductIndex].unit)),window.tcart.products[cartProductIndex].amount>0?productElement.querySelector(".t706__product-amount").innerHTML=tcart__showPrice(window.tcart.products[cartProductIndex].amount):productElement.querySelector(".t706__product-amount").innerHTML="",tcart__updateTotalProductsinCartObj(),tcart__reDrawCartIcon(),tcart__reDrawTotal(),tcart__saveLocalObj()))}function tcart__product__minus(buttonElement){var productElement=buttonElement.closest(".t706__product"),cartProductIndex=productElement.getAttribute("data-cart-product-i");(window.tcart.products[cartProductIndex]||(tcart__syncProductsObject__LStoObj(),null!=window.tcart.products[cartProductIndex]))&&(window.tcart.products[cartProductIndex].quantity>0&&window.tcart.products[cartProductIndex].quantity--,window.tcart.products[cartProductIndex].amount=tcart__roundPrice(window.tcart.products[cartProductIndex].price*window.tcart.products[cartProductIndex].quantity),window.tcart.products[cartProductIndex].amount>0&&(productElement.querySelector(".t706__product-amount").innerHTML=tcart__showPrice(window.tcart.products[cartProductIndex].amount)),window.tcart.products[cartProductIndex].amount>0&&"y"===window.tcart.products[cartProductIndex].single&&void 0!==window.tcart.products[cartProductIndex].portion&&(productElement.querySelector(".t706__product-portion").innerHTML=tcart__showWeight(window.tcart.products[cartProductIndex].quantity*window.tcart.products[cartProductIndex].portion,window.tcart.products[cartProductIndex].unit)),productElement.querySelector(".t706__product-quantity").innerHTML=window.tcart.products[cartProductIndex].quantity,0==window.tcart.products[cartProductIndex].quantity&&tcart__product__del(buttonElement),tcart__updateTotalProductsinCartObj(),tcart__reDrawCartIcon(),tcart__reDrawTotal(),tcart__saveLocalObj())}function tcart__product__del(buttonElement){var productElement=buttonElement.closest(".t706__product"),cartProductIndex=productElement.getAttribute("data-cart-product-i"),cartVersion;if(parseInt(buttonElement.closest(".t706").getAttribute("data-cart-ver"),10)>136){var title=productElement.querySelector(".t706__product-title a").textContent||productElement.querySelector(".t706__product-title").contents().eq(0).textContent,height=productElement.offsetHeight,products=productElement.closest(".t706__cartwin-products"),product,deleted=products.querySelector('.t706__product-deleted[data-cart-product-i="'+cartProductIndex+'"]');if(!deleted){var productsLength;productElement.insertAdjacentHTML("afterend",'<div class="t706__product-deleted" data-cart-product-i="'+cartProductIndex+'" style="display: none">                <div class="t706__product-deleted-wrapper" colspan="5">                    <div class="t706__product-deleted__timer t-descr">                        <div class="t706__product-deleted__timer__left">                            <div class="t706__product-deleted__timer__counter">                                <span class="t706__product-deleted__timer__counter__number">4</span>                                <svg class="t706__product-deleted__timer__counter__circle">                                    <circle r="10" cx="12" cy="12"></circle>                                </svg>                            </div>                            <div class="t706__product-deleted__timer__title">'+tcart_dict("youRemoved")+' "'+title+'"</div>                        </div>                        <div class="t706__product-deleted__timer__return">'+tcart_dict("undo")+"</div>                    </div>                </div>            </div>"),deleted=products.querySelector('.t706__product-deleted[data-cart-product-i="'+cartProductIndex+'"]'),tcart_fadeOut(productElement,200,(function(){null!==productElement.parentNode&&(product=productElement.parentNode.removeChild(productElement)),tcart_fadeIn(deleted,200),deleted.style.height=height+"px"})),window.tcart.products[cartProductIndex].deleted="yes",tcart__updateTotalProductsinCartObj(),tcart__reDrawCartIcon(),tcart__reDrawTotal(),tcart__saveLocalObj(),0===window.tcart.products.filter((function(product){return!tcart__isEmptyObject(product)&&"yes"!==product.deleted&&0!==product.quantity})).length&&(document.querySelector(".t706 .t-form__submit button").classList.add("t706__submit_disable"),document.querySelector(".t706 .t-form__submit button").getAttribute("disabled","disabled"));var timerOut=setInterval((function(){var countdown=deleted.querySelector(".t706__product-deleted__timer__counter__number"),count=countdown.innerText;document.querySelector(".t706__cartwin").classList.contains("t706__cartwin_showed")||clearInterval(timerOut),count>1?countdown.innerText=parseInt(count,10)-1:(clearInterval(timerOut),tcart_fadeOut(deleted,200,(function(){var attr;"yes"!==deleted.getAttribute("data-clicked")&&void 0!==window.tcart.products[cartProductIndex]&&"yes"===window.tcart.products[cartProductIndex].deleted&&(null!==deleted.parentNode&&deleted.parentNode.removeChild(deleted),window.tcart.products[cartProductIndex]={},0===products.querySelectorAll(".t706__product-deleted").length&&tcart__isEmptyObject(window.tcart.products[cartProductIndex])&&(window.tcart.products.splice(cartProductIndex,1),tcart__reDrawProducts()),tcart__saveLocalObj());var productsLength=window.tcart.products.filter((function(product){return!tcart__isEmptyObject(product)})).length;0!==window.tcart.products.length&&0!==productsLength||tcart__closeCart()})))}),1e3);Array.prototype.forEach.call(deleted.querySelectorAll(".t706__product-deleted__timer__return"),(function(deletedReturnBtn){var deletedReturnClickHandler=function(){if(deleted.setAttribute("data-clicked","yes"),clearInterval(timerOut),tcart_fadeOut(deleted,200,(function(){deleted.insertAdjacentElement("afterend",product),tcart_fadeIn(product,200),null!==deleted.parentNode&&deleted.parentNode.removeChild(deleted)})),void 0===window.tcart.products[cartProductIndex]){tcart__reDrawProducts();var productsLength=window.tcart.products.filter((function(el){return!tcart__isEmptyObject(el)})).length;0!==window.tcart.products.length&&0!==productsLength||tcart__closeCart()}else delete window.tcart.products[cartProductIndex].deleted;buttonElement.classList.contains("t706__product-minus")?tcart__product__plus(buttonElement):(tcart__updateTotalProductsinCartObj(),tcart__reDrawCartIcon(),tcart__reDrawTotal(),tcart__saveLocalObj());var submitButton=document.querySelector(".t706 .t-form__submit button");submitButton.classList.remove("t706__submit_disable"),submitButton.removeAttribute("disabled"),deletedReturnBtn.removeEventListener("click",deletedReturnClickHandler)};deletedReturnBtn.addEventListener("click",deletedReturnClickHandler)}))}}else void 0===window.tcart.products[cartProductIndex]&&tcart__syncProductsObject__LStoObj(),window.tcart.products.splice(cartProductIndex,1),null!==productElement.parentNode&&productElement.parentNode.removeChild(productElement),tcart__updateTotalProductsinCartObj(),tcart__reDrawCartIcon(),tcart__saveLocalObj(),tcart__reDrawProducts(),tcart__reDrawTotal(),0===window.tcart.products.length&&tcart__closeCart()}function tcart__product__editquantity(buttonElement){var quantity="";if(!buttonElement.querySelector(".t706__product-quantity-inp")){var productElement=buttonElement.closest(".t706__product"),cartProductIndex=productElement.getAttribute("data-cart-product-i"),buttonElementText=parseInt(buttonElement.textContent,10),str='<input type="text" name="tilda-tmp-cart-qnt" class="t706__product-quantity-inp" value="'+(quantity=0==buttonElementText||buttonElementText>0?buttonElementText:1)+'" style="width:30px">';buttonElement.innerHTML=str,buttonElement.classList.add("t706__product-quantity_editing");var quantityInput=buttonElement.querySelector(".t706__product-quantity-inp");quantityInput.addEventListener("focus",(function(){var inputElement=this;setTimeout((function(){inputElement.selectionStart=inputElement.selectionEnd=1e4}),0)})),quantityInput.focus(),quantityInput.addEventListener("focusout",(function(){var quantity="",quantityInputValue=parseInt(quantityInput.value,10);tcart__product__updateQuantity(buttonElement,productElement,cartProductIndex,quantity=quantityInputValue>0?quantityInputValue:1),buttonElement.textContent=window.tcart.products[cartProductIndex].quantity,buttonElement.classList.remove("t706__product-quantity_editing")}))}}function tcart__product__updateQuantity(buttonElement,productElement,cartProductIndex,quantity){if(quantity>0){void 0!==window.tcart.products[cartProductIndex].inv&&window.tcart.products[cartProductIndex].inv>0&&quantity>window.tcart.products[cartProductIndex].inv&&(alert(tcart_dict("limitReached")),quantity=window.tcart.products[cartProductIndex].inv),window.tcart.products[cartProductIndex].quantity=quantity,window.tcart.products[cartProductIndex].amount=window.tcart.products[cartProductIndex].price*window.tcart.products[cartProductIndex].quantity,window.tcart.products[cartProductIndex].amount=tcart__roundPrice(window.tcart.products[cartProductIndex].amount),productElement.querySelector(".t706__product-quantity").innerHTML=window.tcart.products[cartProductIndex].quantity,"y"===window.tcart.products[cartProductIndex].single&&void 0!==window.tcart.products[cartProductIndex].portion&&(productElement.querySelector(".t706__product-portion").innerHTML=tcart__showWeight(window.tcart.products[cartProductIndex].quantity*window.tcart.products[cartProductIndex].portion,window.tcart.products[cartProductIndex].unit));var productAmount=productElement.querySelector(".t706__product-amount");window.tcart.products[cartProductIndex].amount>0?productAmount.innerHTML=tcart__showPrice(window.tcart.products[cartProductIndex].amount):productAmount.innerHTML=""}else tcart__product__del(buttonElement);tcart__updateTotalProductsinCartObj(),tcart__reDrawCartIcon(),tcart__reDrawTotal(),tcart__saveLocalObj(),0==quantity&&tcart__reDrawProducts()}function tcart__delZeroquantity_inCartObj(){var products=window.tcart.products,isModified="";products.length>0&&products.forEach((function(product,index){void 0!==product&&0==product.quantity&&(window.tcart.products.splice(index,1),isModified="yes")})),"yes"==isModified&&tcart__saveLocalObj()}function tcart__drawBottomTotalAmount(){var str="";str+='<div class="t706__cartwin-totalamount-wrap t-descr t-descr_xl">',str+='<div class="t706__cartwin-totalamount-info" style="margin-top: 10px; font-size:14px; font-weight:400;"></div>',str+='<span class="t706__cartwin-totalamount-label">'+tcart_dict("total")+": </span>",str+='<span class="t706__cartwin-totalamount"></span>',str+="</div>",document.querySelector(".t706 .t-form__errorbox-middle").insertAdjacentHTML("beforebegin",str)}function tcart__addDelivery(){var deliveryWrapper=document.querySelector(".t706 .t-form .t-radio__wrapper-delivery");if(deliveryWrapper){var selectedDelivery=document.querySelector(".t706 .t-form .t-radio__wrapper-delivery input:checked")?document.querySelector(".t706 .t-form .t-radio__wrapper-delivery input:checked"):document.querySelector(".t706 .t-form .t-radio__wrapper-delivery input")[0];if(selectedDelivery)var deliveryName=selectedDelivery.value,deliveryPrice=selectedDelivery.getAttribute("data-delivery-price"),deliveryServiceId=document.querySelector(".t706 .t-form .t-radio__wrapper-delivery .t-radio_delivery:checked").getAttribute("data-service-id");if(void 0!==deliveryName&&void 0!==deliveryPrice&&""!==deliveryName){deliveryPrice=tcart__cleanPrice(deliveryPrice);var nameStartIndex=deliveryName.indexOf("=");nameStartIndex>0&&(deliveryName=(deliveryName=deliveryName.substring(0,nameStartIndex)).trim()),window.tcart.delivery={},window.tcart.delivery.name=deliveryName,window.tcart.delivery.price=deliveryPrice,deliveryServiceId&&(window.tcart.delivery.service_id=deliveryServiceId),window.tcart_newDeliveryActive&&window.tcart_newDelivery.deliveryState.freeDeliveryThreshold>=0?window.tcart.delivery.freedl=window.tcart_newDelivery.deliveryState.freeDeliveryThreshold:deliveryWrapper.getAttribute("data-delivery-free")>=0&&(window.tcart.delivery.freedl=parseInt(deliveryWrapper.getAttribute("data-delivery-free"),10))}var deliveryInputs=document.querySelectorAll(".t706 .t-form .t-radio__wrapper-delivery input");deliveryInputs.length&&Array.prototype.forEach.call(deliveryInputs,(function(deliveryInput){deliveryInput.addEventListener("change",(function(){tcart__updateDelivery()}))}))}}function tcart__updateDelivery(){var selectedDelivery=document.querySelector(".t706 .t-form .t-radio__wrapper-delivery input:checked");if(selectedDelivery)var deliveryName=selectedDelivery.value,deliveryPrice=selectedDelivery.getAttribute("data-delivery-price");if(void 0!==deliveryName&&void 0!==deliveryPrice&&""!==deliveryName){if(deliveryPrice=tcart__cleanPrice(deliveryPrice),""!=deliveryName){var nameStartIndex=deliveryName.indexOf("=");nameStartIndex>0&&(deliveryName=(deliveryName=deliveryName.substring(0,nameStartIndex)).trim())}if(window.tcart.delivery={},window.tcart.delivery.name=deliveryName,window.tcart.delivery.price=deliveryPrice,window.tcart_newDeliveryActive&&window.tcart_newDelivery.deliveryState.freeDeliveryThreshold>=0)window.tcart.delivery.freedl=window.tcart_newDelivery.deliveryState.freeDeliveryThreshold;else{var deliveryWrapper=document.querySelector(".t706 .t-form .t-radio__wrapper-delivery");deliveryWrapper.getAttribute("data-delivery-free")>=0&&(window.tcart.delivery.freedl=parseInt(deliveryWrapper.getAttribute("data-delivery-free"),10))}}else void 0!==window.tcart.delivery&&delete window.tcart.delivery;document.querySelector(".t706 #customdelivery")&&(void 0===tcart_newDelivery.fillTcartDelivery?tcart_newDelivery.saveTcartDelivery():tcart_newDelivery.fillTcartDelivery(),tcart_newDelivery.setFullAddress(tcart_newDelivery.getFullAddress())),void 0!==window.tcart.products&&0!==window.tcart.products.length||tcart__syncProductsObject__LStoObj(),tcart__updateTotalProductsinCartObj(),tcart__reDrawTotal()}function tcart__addPromocode(promocodeObject){"object"!=typeof window.tcart.promocode?("object"==typeof promocodeObject&&void 0!==promocodeObject.promocode&&""!=promocodeObject.promocode&&(promocodeObject.discountsum>0||promocodeObject.discountpercent>0)&&(window.tcart.promocode=promocodeObject),window.tcart_newDeliveryActive&&window.tcart.amount&&window.tcart.total&&tcart__rerenderDeliveryServices(),tcart__updateTotalProductsinCartObj(),tcart__reDrawTotal()):console.error("Error. Promocode already activated before")}function tcart__addEvent__selectpayment(){if(0!=document.querySelectorAll(".t706 .t-input-group_pm").length){var paymentInputs=document.querySelectorAll(".t706 .t-form .t-radio__wrapper-payment input");paymentInputs.length&&(Array.prototype.forEach.call(paymentInputs,(function(paymentInput){paymentInput.addEventListener("change",(function(){var variantInput,variant;document.querySelector(".t706 .t-form .t-radio__wrapper-payment input:checked")&&(variant=document.querySelector(".t706 .t-form .t-radio__wrapper-payment input:checked").getAttribute("data-payment-variant-system")),variant||(variant=""),document.querySelector(".t706").setAttribute("data-payment-variant-system",variant),window.tcart.system=variant}))})),document.querySelector(".t706 .t-form .t-radio__wrapper-payment input:checked").dispatchEvent(new Event("change")))}}function tcart__escapeHtml(text){var map={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return text.replace(/[<>"']/g,(function(m){return map[m]}))}function tcart__escapeHtmlImg(text){var map={"<":"&lt;",">":"&gt;",'"':"&quot;"};return text.replace(/[<>"]/g,(function(m){return map[m]}))}function tcart__cleanPrice(price){return price?(price=(price=price.replace(",",".")).replace(/[^0-9\.]/g,""),price=parseFloat(price).toFixed(2),isNaN(price)&&(price=0),price=parseFloat(price),(price*=1)<0&&(price=0)):price=0,price}function tcart__roundPrice(price){return void 0===price||""==price||0==price?price=0:(price=parseFloat(price).toFixed(2),price=parseFloat(price),(price*=1)<0&&(price=0)),price}function tcart__showWeight(weight,unit){if(isNaN(parseInt(weight,10)))return"";var convertedUnits={lites:{value:1e3,units:["MLT","LTR"]},gramms:{value:1e3,units:["MGM","GRM","KGM","TNE"]},meters:{value:10,units:["MMT","CMT","DMT","MTR"]}},position=-1,key="";if(Object.keys(convertedUnits).forEach((function(el){var index=convertedUnits[el].units.indexOf(unit);index>=0&&(position=index,key=el)})),position>=0&&""!==key)for(var value=convertedUnits[key].value,i=position+1;i<convertedUnits[key].units.length;i++)weight>value&&(weight/=value,unit=convertedUnits[key].units[i]);return tcart__roundPrice(weight)+" "+tcart_dict(unit)}function tcart__showPrice(price){if(void 0===price||0==price||""==price)price="";else{var priceDecimal;if(price=price.toString(),void 0!==window.tcart.currency_dec&&"00"==window.tcart.currency_dec)if(-1===price.indexOf(".")&&-1===price.indexOf(","))price+=".00";else 1===price.substr(price.indexOf(".")+1).length&&(price+="0");price=price.replace(/\B(?=(\d{3})+(?!\d))/g," "),void 0!==window.tcart.currency_sep&&","==window.tcart.currency_sep&&(price=price.replace(".",",")),price=window.tcart.currency_txt_l+price+window.tcart.currency_txt_r}return price}function tcart__lockScroll(){if(window.isiOS&&!window.MSStream&&""!==window.isiOSVersion&&void 0!==window.isiOSVersion&&11===window.isiOSVersion[0]){var body=document.querySelector("body");if(!body.classList.contains("t-body_scroll-locked")){var bodyScrollTop=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;body.classList.add("t-body_scroll-locked"),body.style.top="-"+bodyScrollTop+"px",body.setAttribute("data-popup-scrolltop",bodyScrollTop)}}}function tcart__unlockScroll(){if(window.isiOS&&!window.MSStream&&""!==window.isiOSVersion&&void 0!==window.isiOSVersion&&11===window.isiOSVersion[0]){var body=document.querySelector("body");if(body.classList.contains("t-body_scroll-locked")){var bodyScrollTop=body.getAttribute("data-popup-scrolltop");body.classList.remove("t-body_scroll-locked"),body.style.top="",body.removeAttribute("data-popup-scrolltop"),window.scrollTo(0,bodyScrollTop)}}}function tcart__clearProdUrl(){try{var currentUrl=window.location.href,indexToRemove=currentUrl.indexOf("#!/tproduct/");if(window.isiOS&&indexToRemove<0&&(indexToRemove=currentUrl.indexOf("%23!/tproduct/"))<0&&(indexToRemove=currentUrl.indexOf("#%21%2Ftproduct%2F")),indexToRemove<0&&tcart__onFuncLoad("t_store_closePopup",(function(){t_store_closePopup(!1)})),indexToRemove<0)return;if(currentUrl=currentUrl.substring(0,indexToRemove),void 0!==history.replaceState)try{window.history.replaceState("","",currentUrl)}catch(e){}}catch(e){}}function tcart__onFuncLoad(funcName,okFunc,time){if("function"==typeof window[funcName])okFunc();else{var startTime=Date.now();setTimeout((function checkFuncExist(){var currentTime=Date.now();if("function"!=typeof window[funcName]){if("complete"===document.readyState&&currentTime-startTime>5e3&&"function"!=typeof window[funcName])throw new Error(funcName+" is undefined");setTimeout(checkFuncExist,time||100)}else okFunc()}))}}function tcart_fadeOut(el,duration,complete){var opacity=1;duration=parseInt(duration);var speed,timer=setInterval((function(){el.style.opacity=opacity,(opacity-=.1)<=.1&&(clearInterval(timer),el.style.display="none","function"==typeof complete&&complete())}),duration>0?duration/10:40)}function tcart_fadeIn(el,duration,complete){if(("1"===getComputedStyle(el).opacity||""===getComputedStyle(el).opacity)&&"none"!==getComputedStyle(el).display)return!1;var opacity=0,speed=(duration=parseInt(duration))>0?duration/10:40;el.style.opacity=opacity,el.style.display="";var timer=setInterval((function(){el.style.opacity=opacity,(opacity+=.1)>=1&&(clearInterval(timer),"function"==typeof complete&&complete())}),speed)}function tcart__isEmptyObject(obj){for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key))return!1;return!0}function tcart_changeEndpoint(error,callback){error&&(error.status>=500||408==error.status||410==error.status||429==error.status||"timeout"==error.statusText||0==error.status&&"rejected"==error.state())&&-1!==window.tcart_endpoint.indexOf("store.tildacdn.com")?(window.tcart_endpoint="store2.tildacdn.com","function"==typeof callback&&callback()):error&&error.responseText>""?console.log("["+error.status+"] "+error.responseText+". Please, try again later."):error&&error.statusText?console.log("Error ["+error.status+", "+error.statusText+"]. Please, try again later."):console.log("["+error.status+"] Unknown error. Please, try again later.")}function tcart__serializeCartForm(form){for(var arr=[],elements=form.elements,i=0;i<elements.length;i++)if(!(!elements[i].name||elements[i].disabled||("hidden"==elements[i].type||null===elements[i].offsetParent)&&0!==elements[i].name.indexOf("tildadelivery-pickup-name")||["file","reset","submit","button"].indexOf(elements[i].type)>-1))if("select-multiple"!==elements[i].type)["checkbox","radio"].indexOf(elements[i].type)>-1&&!elements[i].checked||arr.push({name:elements[i].name,value:elements[i].value});else for(var options=elements[i].options,j=0;j<options.length;j++)options[j].selected&&arr.push({name:options[j].name,value:options[j].value});return arr}Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(s){for(var el=this;el&&1===el.nodeType;){if(Element.prototype.matches.call(el,s))return el;el=el.parentElement||el.parentNode}return null});